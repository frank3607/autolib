{"ast":null,"code":"import _objectSpread from\"C:/Users/frank/OneDrive/Desktop/mini-library/library-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{FiUser,FiEdit,FiSave}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProfileHeader=()=>{const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[isEditing,setIsEditing]=useState(false);const[formData,setFormData]=useState({name:'',email:'',mobile:'',profilePhoto:''});useEffect(()=>{const fetchProfile=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get('/api/auth/me',{headers:{Authorization:\"Bearer \".concat(token)}});setUser(res.data);setFormData({name:res.data.name||'',email:res.data.email||'',mobile:res.data.mobile||'',profilePhoto:res.data.profilePhoto||''});}catch(err){console.error(err);}finally{setLoading(false);}};fetchProfile();},[]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async()=>{try{const token=localStorage.getItem('token');const res=await axios.put('/api/auth/profile',formData,{headers:{Authorization:\"Bearer \".concat(token)}});setUser(res.data);setIsEditing(false);}catch(err){console.error('Error updating profile:',err);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600\"})});}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"p-6 text-center text-gray-500\",children:\"Unable to load profile.\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto mt-12 bg-gradient-to-r from-indigo-700 via-indigo-600 to-indigo-800 rounded-xl shadow-lg p-8 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row items-center gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[user!==null&&user!==void 0&&user.profilePhoto?/*#__PURE__*/_jsx(\"img\",{src:user.profilePhoto,alt:user.name||'User',className:\"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full bg-white/20 flex items-center justify-center border-4 border-white shadow-lg\",children:/*#__PURE__*/_jsx(FiUser,{className:\"text-white text-4xl\"})}),isEditing&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"profilePhoto\",value:formData.profilePhoto,onChange:handleChange,placeholder:\"Enter image URL\",className:\"mt-2 w-full px-3 py-2 text-sm border border-gray-300 rounded text-gray-900\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,className:\"text-2xl font-bold text-gray-900 px-2 py-1 rounded\"}):/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>isEditing?handleSubmit():setIsEditing(true),className:\"flex items-center bg-white text-indigo-700 px-3 py-1 rounded-lg hover:bg-gray-100 transition\",children:[isEditing?/*#__PURE__*/_jsx(FiSave,{className:\"mr-1\"}):/*#__PURE__*/_jsx(FiEdit,{className:\"mr-1\"}),isEditing?'Save':'Edit']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Email:\"}),\" \",isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:\"px-2 py-1 rounded text-gray-900\"}):user===null||user===void 0?void 0:user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Mobile:\"}),\" \",isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"mobile\",value:formData.mobile,onChange:handleChange,className:\"px-2 py-1 rounded text-gray-900\"}):user===null||user===void 0?void 0:user.mobile]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Member Since:\"}),' ',user!==null&&user!==void 0&&user.createdAt?new Date(user.createdAt).toLocaleDateString():'N/A']})]})]})]})});};export default ProfileHeader;","map":{"version":3,"names":["React","useState","useEffect","axios","FiUser","FiEdit","FiSave","jsx","_jsx","jsxs","_jsxs","ProfileHeader","user","setUser","loading","setLoading","isEditing","setIsEditing","formData","setFormData","name","email","mobile","profilePhoto","fetchProfile","token","localStorage","getItem","res","get","headers","Authorization","concat","data","err","console","error","handleChange","e","_objectSpread","target","value","handleSubmit","put","className","children","src","alt","type","onChange","placeholder","onClick","createdAt","Date","toLocaleDateString"],"sources":["C:/Users/frank/OneDrive/Desktop/mini-library/library-frontend/src/components/profile/ProfileHeader.js"],"sourcesContent":[" import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { FiUser, FiEdit, FiSave } from 'react-icons/fi';\r\n\r\nconst ProfileHeader = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    email: '',\r\n    mobile: '',\r\n    profilePhoto: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const res = await axios.get('/api/auth/me', {\r\n          headers: { Authorization: `Bearer ${token}` }\r\n        });\r\n        setUser(res.data);\r\n        setFormData({\r\n          name: res.data.name || '',\r\n          email: res.data.email || '',\r\n          mobile: res.data.mobile || '',\r\n          profilePhoto: res.data.profilePhoto || ''\r\n        });\r\n      } catch (err) {\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await axios.put('/api/auth/profile', formData, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setUser(res.data);\r\n      setIsEditing(false);\r\n    } catch (err) {\r\n      console.error('Error updating profile:', err);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center py-8\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"p-6 text-center text-gray-500\">\r\n        Unable to load profile.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto mt-12 bg-gradient-to-r from-indigo-700 via-indigo-600 to-indigo-800 rounded-xl shadow-lg p-8 text-white\">\r\n      <div className=\"flex flex-col md:flex-row items-center gap-8\">\r\n        \r\n        {/* Profile Image */}\r\n        <div className=\"relative\">\r\n          {user?.profilePhoto ? (\r\n            <img\r\n              src={user.profilePhoto}\r\n              alt={user.name || 'User'}\r\n              className=\"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg\"\r\n            />\r\n          ) : (\r\n            <div className=\"w-32 h-32 rounded-full bg-white/20 flex items-center justify-center border-4 border-white shadow-lg\">\r\n              <FiUser className=\"text-white text-4xl\" />\r\n            </div>\r\n          )}\r\n          {isEditing && (\r\n            <input\r\n              type=\"text\"\r\n              name=\"profilePhoto\"\r\n              value={formData.profilePhoto}\r\n              onChange={handleChange}\r\n              placeholder=\"Enter image URL\"\r\n              className=\"mt-2 w-full px-3 py-2 text-sm border border-gray-300 rounded text-gray-900\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Profile Info */}\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex justify-between items-start mb-4\">\r\n            {isEditing ? (\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                value={formData.name}\r\n                onChange={handleChange}\r\n                className=\"text-2xl font-bold text-gray-900 px-2 py-1 rounded\"\r\n              />\r\n            ) : (\r\n              <h1 className=\"text-2xl font-bold\">{user?.name}</h1>\r\n            )}\r\n\r\n            <button\r\n              onClick={() => (isEditing ? handleSubmit() : setIsEditing(true))}\r\n              className=\"flex items-center bg-white text-indigo-700 px-3 py-1 rounded-lg hover:bg-gray-100 transition\"\r\n            >\r\n              {isEditing ? <FiSave className=\"mr-1\" /> : <FiEdit className=\"mr-1\" />}\r\n              {isEditing ? 'Save' : 'Edit'}\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <p>\r\n              <span className=\"font-medium\">Email:</span> {isEditing ? (\r\n                <input\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  value={formData.email}\r\n                  onChange={handleChange}\r\n                  className=\"px-2 py-1 rounded text-gray-900\"\r\n                />\r\n              ) : (\r\n                user?.email\r\n              )}\r\n            </p>\r\n\r\n            <p>\r\n              <span className=\"font-medium\">Mobile:</span> {isEditing ? (\r\n                <input\r\n                  type=\"tel\"\r\n                  name=\"mobile\"\r\n                  value={formData.mobile}\r\n                  onChange={handleChange}\r\n                  className=\"px-2 py-1 rounded text-gray-900\"\r\n                />\r\n              ) : (\r\n                user?.mobile\r\n              )}\r\n            </p>\r\n\r\n            <p>\r\n              <span className=\"font-medium\">Member Since:</span>{' '}\r\n              {user?.createdAt ? new Date(user.createdAt).toLocaleDateString() : 'N/A'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileHeader;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}