{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{FiArrowLeft}from'react-icons/fi';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BorrowingHistory=()=>{const[history,setHistory]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchHistory=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get('/api/admin/borrowing-history',{headers:{Authorization:\"Bearer \".concat(token)}});setHistory(res.data);setLoading(false);}catch(err){console.error('Error fetching borrowing history:',err);setLoading(false);}};fetchHistory();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin\",className:\"flex items-center text-indigo-600 hover:text-indigo-800 mr-4\",children:[/*#__PURE__*/_jsx(FiArrowLeft,{className:\"mr-1\"}),\" Back to Dashboard\"]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800\",children:\"Borrowing History\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-md overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Book\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Issue Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Return Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\",children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:history.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"px-6 py-4 text-center text-gray-500\",children:\"No borrowing history found\"})}):history.map(item=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[item.book.coverImage?/*#__PURE__*/_jsx(\"img\",{className:\"h-10 w-10 rounded-md object-cover\",src:item.book.coverImage,alt:item.book.title}):/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-md bg-gray-200 flex items-center justify-center text-gray-500 text-xs\",children:\"No Img\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:item.book.title}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:item.book.author})]})]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:item.user.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:item.user.email})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:item.issueDate?new Date(item.issueDate).toLocaleDateString():'-'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:item.returnDate?new Date(item.returnDate).toLocaleDateString():'Not returned'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \".concat(item.status==='Borrowed'?'bg-yellow-100 text-yellow-800':'bg-green-100 text-green-800'),children:item.status})})]},item._id))})]})})})]});};export default BorrowingHistory;","map":{"version":3,"names":["React","useState","useEffect","Link","FiArrowLeft","axios","jsx","_jsx","jsxs","_jsxs","BorrowingHistory","history","setHistory","loading","setLoading","fetchHistory","token","localStorage","getItem","res","get","headers","Authorization","concat","data","err","console","error","className","children","to","length","colSpan","map","item","book","coverImage","src","alt","title","author","user","name","email","issueDate","Date","toLocaleDateString","returnDate","status","_id"],"sources":["C:/Users/frank/OneDrive/Desktop/mini-library/library-frontend/src/components/admin/BorrowingHistory.js"],"sourcesContent":[" import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { FiArrowLeft } from 'react-icons/fi';\r\nimport axios from 'axios';\r\n\r\nconst BorrowingHistory = () => {\r\n  const [history, setHistory] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchHistory = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const res = await axios.get('/api/admin/borrowing-history', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n        setHistory(res.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        console.error('Error fetching borrowing history:', err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchHistory();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <div className=\"flex items-center mb-6\">\r\n        <Link to=\"/admin\" className=\"flex items-center text-indigo-600 hover:text-indigo-800 mr-4\">\r\n          <FiArrowLeft className=\"mr-1\" /> Back to Dashboard\r\n        </Link>\r\n        <h1 className=\"text-3xl font-bold text-gray-800\">Borrowing History</h1>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"flex justify-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600\"></div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-white rounded-xl shadow-md overflow-hidden\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Book</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">User</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Issue Date</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Return Date</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {history.length === 0 ? (\r\n                  <tr>\r\n                    <td colSpan=\"5\" className=\"px-6 py-4 text-center text-gray-500\">\r\n                      No borrowing history found\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  history.map((item) => (\r\n                    <tr key={item._id} className=\"hover:bg-gray-50\">\r\n                      {/* Book info */}\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center\">\r\n                          {item.book.coverImage ? (\r\n                            <img\r\n                              className=\"h-10 w-10 rounded-md object-cover\"\r\n                              src={item.book.coverImage}\r\n                              alt={item.book.title}\r\n                            />\r\n                          ) : (\r\n                            <div className=\"h-10 w-10 rounded-md bg-gray-200 flex items-center justify-center text-gray-500 text-xs\">\r\n                              No Img\r\n                            </div>\r\n                          )}\r\n                          <div className=\"ml-4\">\r\n                            <div className=\"text-sm font-medium text-gray-900\">{item.book.title}</div>\r\n                            <div className=\"text-sm text-gray-500\">{item.book.author}</div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n\r\n                      {/* User info */}\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">{item.user.name}</div>\r\n                        <div className=\"text-sm text-gray-500\">{item.user.email}</div>\r\n                      </td>\r\n\r\n                      {/* Issue Date */}\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        {item.issueDate ? new Date(item.issueDate).toLocaleDateString() : '-'}\r\n                      </td>\r\n\r\n                      {/* Return Date */}\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        {item.returnDate ? new Date(item.returnDate).toLocaleDateString() : 'Not returned'}\r\n                      </td>\r\n\r\n                      {/* Status */}\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span\r\n                          className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\r\n                            item.status === 'Borrowed'\r\n                              ? 'bg-yellow-100 text-yellow-800'\r\n                              : 'bg-green-100 text-green-800'\r\n                          }`}\r\n                        >\r\n                          {item.status}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BorrowingHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}